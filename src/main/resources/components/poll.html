<div live:id="{{ _id }}" class="max-w-3xl mx-auto bg-zinc-900 rounded-lg border border-zinc-800 p-6" xmlns:live="http://www.w3.org/1999/xhtml">
    <h2 class="text-xl font-bold text-white mb-2">ðŸ“Š {{ question }}</h2>
    <p class="text-gray-400 text-sm mb-6">{{ totalVotes }} vote{% if totalVotes != 1 %}s{% endif %} total</p>
    
    {% if not hasVoted %}
        <!-- Voting interface -->
        <div class="space-y-3">
            {% for entry in options.entrySet() %}
            <button 
                live:click="vote('{{ entry.key }}')"
                class="w-full px-4 py-3 bg-zinc-800 hover:bg-zinc-700 border border-zinc-700 hover:border-blue-500 rounded text-white text-left transition"
            >
                {{ entry.key }}
            </button>
            {% endfor %}
        </div>
    {% else %}
        <!-- Results -->
        <div class="space-y-4 mb-6">
            {% for entry in options.entrySet() %}
            <div>
                <div class="flex justify-between mb-1">
                    <span class="text-white {% if entry.key == selectedOption %}font-bold{% endif %}">
                        {{ entry.key }}
                        {% if entry.key == selectedOption %}âœ“{% endif %}
                    </span>
                    <span class="text-gray-400">{{ entry.value }} ({{ percentages[entry.key] }}%)</span>
                </div>
                <div class="w-full bg-zinc-800 rounded-full h-2">
                    <div 
                        class="{% if entry.key == selectedOption %}bg-blue-600{% else %}bg-zinc-600{% endif %} h-2 rounded-full transition-all"
                        style="width: {{ percentages[entry.key] }}%"
                    ></div>
                </div>
            </div>
            {% endfor %}
        </div>
        
        <div class="bg-zinc-800 border border-zinc-700 rounded p-3 mb-4">
            <div class="text-sm text-gray-400">Current leader:</div>
            <div class="text-lg font-bold text-blue-400">{{ winner }}</div>
        </div>
        
        <button 
            live:click="reset" 
            class="w-full px-4 py-2 bg-zinc-800 hover:bg-zinc-700 text-gray-300 rounded transition"
        >
            Vote again
        </button>
    {% endif %}
    
    <div live:loading style="display: none;" class="mt-4 text-center text-blue-400 text-sm">
        Recording vote...
    </div>
</div>
